-- --------------------------------------------------------
-- Host:                         127.0.0.1
-- Versi server:                 8.0.30 - MySQL Community Server - GPL
-- OS Server:                    Win64
-- HeidiSQL Versi:               12.1.0.6537
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

-- Membuang data untuk tabel landingpagebuilder.pages: ~3 rows (lebih kurang)
REPLACE INTO `pages` (`id`, `user_id`, `title`, `slug`, `status`, `html_content`, `shopee_link`, `tokped_link`, `fb_link`, `ig_link`, `tiktok_link`, `x_link`, `corporate`, `publisher`, `whatsapp`, `telegram`, `published_path`, `published_at`, `created_at`, `updated_at`, `template_id`, `order_type`, `cta_label`, `cta_url`, `product_config`) VALUES
	(3, 1, 'DEMO Landing Page 3', 'demo-3', 'draft', '\r\n            \r\n            \r\n                            <!-- Template 01: aiti-solutions -->\r\n<section class="py-5 bg-light text-center">\r\n    <div class="container">\r\n        <p class="small text-uppercase text-muted mb-2"><span style="color: rgb(33, 37, 41); font-size: 3rem; font-weight: 700;">Judul Landing Page</span></p>\r\n        <p class="lead text-secondary mb-4">Tuliskan value utama atau promosi singkat di sini supaya pengunjung langsung paham.</p>\r\n        <div class="my-4">\r\n            <div class="border rounded-4 bg-white shadow-sm p-4">\r\n                <div class="ratio ratio-16x9 bg-light rounded-3 d-flex align-items-center justify-content-center">\r\n                    <span class="text-muted">Ganti gambar/video utama di sini</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="d-flex flex-wrap justify-content-center gap-3">\r\n            <a class="btn btn-success btn-lg" href="#cta-whatsapp">Pesan via WhatsApp</a>\r\n            <a class="btn btn-outline-secondary btn-lg" href="#cta-marketplace">Lihat di Marketplace</a>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<section class="py-4">\r\n    <div class="container">\r\n        <div class="row g-4 align-items-center">\r\n            <div class="col-lg-6">\r\n                <h2 class="h4 fw-bold mb-3">Kenapa pilih produk ini?</h2>\r\n                <p class="text-secondary">Tambahkan 2-3 poin keunggulan atau manfaat utama yang paling dicari audiensmu.</p>\r\n                <ul class="list-unstyled mb-0">\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span><strong>Poin 1:</strong> Jelaskan manfaat utama.</span></li>\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span><strong>Poin 2:</strong> Tunjukkan bukti sosial atau hasil.</span></li>\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span><strong>Poin 3:</strong> Tawarkan bonus atau garansi.</span></li>\r\n                </ul>\r\n            </div>\r\n            <div class="col-lg-6">\r\n                <div class="border rounded-4 p-4 bg-light h-100">\r\n                    <h3 class="h5 fw-bold mb-3">Penawaran spesial</h3>\r\n                    <p class="text-secondary">Tempatkan harga, diskon, atau bundling di sini. Bisa juga menambahkan countdown atau note stok terbatas.</p>\r\n                    <div class="d-flex flex-wrap gap-2">\r\n                        <span class="badge bg-success">Best Seller</span>\r\n                        <span class="badge bg-warning text-dark">Diskon Terbatas</span>\r\n                        <span class="badge bg-info text-dark">Gratis Konsultasi</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<section class="py-4 bg-light">\r\n    <div class="container">\r\n        <h2 class="h5 fw-bold mb-2">Hubungi &amp; Social</h2>\r\n        <p class="text-secondary small mb-3">Tombol di bawah akan otomatis muncul saat link diisi di form admin. Kamu tetap bisa mengedit teks atau urutan tombol via CanvasEditor.</p>\r\n        <!--SOCIAL_LINKS-->\r\n    </div>\r\n</section>\r\n                                    ', '', '', '', '', '', '', '', '', '', '', 'page/demo-3.html', '2025-11-22 08:38:51', '2025-11-22 06:09:46', '2025-11-22 08:38:57', 1, 'link', 'Pesan Sekarang', '', NULL),
	(4, 1, 'Demo 2', 'demo-2', 'draft', '\r\n            \r\n                            <!-- Template 01: aiti-solutions -->\r\n<section class="py-5 text-center">\r\n    <div class="container">\r\n        <h1 class="display-5 fw-bold">Judul Landing Page</h1>\r\n        <p class="lead text-secondary mb-4">Tuliskan value utama atau promosi singkat di sini supaya pengunjung langsung\r\n            paham.</p>\r\n        <div class="my-4">\r\n            <div class="border rounded-4 bg-white shadow-sm p-4">\r\n                <div class="ratio ratio-16x9 bg-light rounded-3 d-flex align-items-center justify-content-center">\r\n                    <span class="text-muted">Ganti gambar/video utama di sini</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="d-flex flex-wrap justify-content-center gap-3">\r\n            <a class="btn btn-success btn-lg" href="#cta-whatsapp">Pesan via WhatsApp</a>\r\n            <a class="btn btn-outline-secondary btn-lg" href="#cta-marketplace">Lihat di Marketplace</a>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<section class="py-4">\r\n    <div class="container">\r\n        <div class="row g-4 align-items-center">\r\n            <div class="col-lg-6">\r\n                <h2 class="h4 fw-bold mb-3">Kenapa pilih produk ini?</h2>\r\n                <p class="text-secondary">Tambahkan 2-3 poin keunggulan atau manfaat utama yang paling dicari audiensmu.\r\n                </p>\r\n                <ul class="list-unstyled mb-0">\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span><strong>Poin\r\n                                1:</strong> Jelaskan manfaat utama.</span></li>\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span><strong>Poin\r\n                                2:</strong> Tunjukkan bukti sosial atau hasil.</span></li>\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span><strong>Poin\r\n                                3:</strong> Tawarkan bonus atau garansi.</span></li>\r\n                </ul>\r\n            </div>\r\n            <div class="col-lg-6">\r\n                <div class="border rounded-4 p-4 bg-light h-100">\r\n                    <h3 class="h5 fw-bold mb-3">Penawaran spesial</h3>\r\n                    <p class="text-secondary">Tempatkan harga, diskon, atau bundling di sini. Bisa juga menambahkan\r\n                        countdown atau note stok terbatas.</p>\r\n                    <div class="d-flex flex-wrap gap-2">\r\n                        <span class="badge bg-success">Best Seller</span>\r\n                        <span class="badge bg-warning text-dark">Diskon Terbatas</span>\r\n                        <span class="badge bg-info text-dark">Gratis Konsultasi</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<section class="py-4 bg-light">\r\n    <div class="container">\r\n        <h2 class="h5 fw-bold mb-2">Hubungi &amp; Social</h2>\r\n        <p class="text-secondary small mb-3">Tombol di bawah akan otomatis muncul saat link diisi di form admin. Kamu\r\n            tetap bisa mengedit teks atau urutan tombol</p>\r\n        <!--SOCIAL_LINKS-->\r\n    </div>\r\n</section>                            ', 'http://localhost/Shopee', 'http://localhost/Tokopedia', 'http://localhost/Facebook', 'http://localhost/Instagram', 'http://localhost/TikTok', 'http://localhost/X Link', 'http://localhost/Corporate', 'http://localhost/Publisher', 'http://localhost/WhatsApp', 'http://localhost/Telegram', 'page/demo-2.html', '2025-11-22 07:12:45', '2025-11-22 07:12:42', '2025-11-22 08:39:02', 1, 'link', 'Pesan Sekarang', 'http://localhost/cta', NULL),
	(7, 1, 'demo 4', 'bemo-4', 'published', '\r\n                            <!-- Template 02: Payment Gateway base layout -->\r\n<section class="py-5 bg-light">\r\n    <div class="container">\r\n        <div class="row g-4 align-items-center">\r\n            <div class="col-lg-6">\r\n                <h1 class="display-6 fw-bold">Judul Produk / Paket</h1>\r\n                <p class="lead text-secondary">Masukkan deskripsi singkat tentang produk atau layanan yang akan dibayar via gateway.</p>\r\n                <ul class="list-unstyled mb-4">\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span>Highlight 1: manfaat utama.</span></li>\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span>Highlight 2: bonus atau garansi.</span></li>\r\n                    <li class="d-flex mb-2"><span class="me-2 text-success">✓</span><span>Highlight 3: testimoni atau hasil.</span></li>\r\n                </ul>\r\n                <div class="d-flex flex-wrap gap-2">\r\n                    <a class="btn btn-primary btn-lg" href="#pay-now">Bayar Sekarang</a>\r\n                    <a class="btn btn-outline-secondary btn-lg" href="#cta-whatsapp">Tanya Admin</a>\r\n                </div>\r\n            </div>\r\n            <div class="col-lg-6">\r\n                <div class="border rounded-4 bg-white shadow-sm p-4">\r\n                    <div class="mb-3 text-center">\r\n                        <div class="ratio ratio-1x1 bg-light rounded-3 d-flex align-items-center justify-content-center">\r\n                            <span class="text-muted">QR / Barcode Pembayaran</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="text-center">\r\n                        <p class="h5 fw-bold mb-1">Rp 200k</p>\r\n                        <p class="text-muted small mb-3">Isi harga produk di sini. Bisa tambahkan keterangan DP/termin.</p>\r\n                        <div class="d-grid gap-2">\r\n                            <button class="btn btn-success" type="button">Bayar via Gateway</button>\r\n                            <button class="btn btn-outline-secondary" type="button">Upload Bukti Transfer</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<section class="py-4">\r\n    <div class="container">\r\n        <h2 class="h5 fw-bold mb-2">Hubungi &amp; Social</h2>\r\n        <p class="text-secondary small mb-3">Link di bawah akan terisi otomatis dari form admin.</p>\r\n        <!--SOCIAL_LINKS-->\r\n    </div>\r\n</section>\r\n\r\n<!-- Payment Modal -->\r\n<div class="modal fade" id="payModal" tabindex="-1" aria-hidden="true">\r\n  <div class="modal-dialog modal-dialog-centered">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <h5 class="modal-title">QR Pembayaran</h5>\r\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\r\n      </div>\r\n      <div class="modal-body text-center">\r\n        <div id="qrWrap">Loading...</div>\r\n        <div id="countdown" class="mt-2 fw-bold"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script>\r\n(() => {\r\n    const payBtn = document.querySelector(\'#pay-now, .btn-pay-gateway\') || document.querySelector(\'button.btn.btn-success\');\r\n    const modalEl = document.getElementById(\'payModal\');\r\n    const qrWrap = document.getElementById(\'qrWrap\');\r\n    const countdownEl = document.getElementById(\'countdown\');\r\n    let pollTimer = null;\r\n    let countdownTimer = null;\r\n\r\n    function getApiBase() {\r\n        const path = window.location.pathname;\r\n        const prefixSplit = path.split(\'/page/\');\r\n        const basePath = prefixSplit[0] || \'\';\r\n        return window.location.origin + basePath;\r\n    }\r\n\r\n    function startCountdown(expiry) {\r\n        clearInterval(countdownTimer);\r\n        if (!expiry) {\r\n            countdownEl.textContent = \'\';\r\n            return;\r\n        }\r\n        const expiryTime = new Date(expiry).getTime();\r\n        countdownTimer = setInterval(() => {\r\n            const diff = expiryTime - Date.now();\r\n            if (diff <= 0) {\r\n                countdownEl.textContent = \'QR kedaluwarsa\';\r\n                clearInterval(countdownTimer);\r\n                return;\r\n            }\r\n            const mins = Math.floor(diff / 60000);\r\n            const secs = Math.floor((diff % 60000) / 1000);\r\n            countdownEl.textContent = \'Berlaku: \' + mins + \'m \' + secs + \'s\';\r\n        }, 1000);\r\n    }\r\n\r\n    function pollStatus(orderId) {\r\n        clearInterval(pollTimer);\r\n        const apiBase = getApiBase();\r\n        pollTimer = setInterval(() => {\r\n            fetch(apiBase + \'/api/payments/\' + encodeURIComponent(orderId) + \'/status\')\r\n                .then(r => r.json())\r\n                .then(res => {\r\n                    if (res.status === \'settlement\') {\r\n                        clearInterval(pollTimer);\r\n                        const redirectUrl = apiBase + \'/thank-you?order_id=\' + encodeURIComponent(orderId);\r\n                        const modal = bootstrap.Modal.getInstance(modalEl);\r\n                        if (modal) modal.hide();\r\n                        window.location.href = redirectUrl;\r\n                    } else if (res.status === \'expire\' || res.status === \'cancel\' || res.status === \'failure\') {\r\n                        clearInterval(pollTimer);\r\n                        qrWrap.innerHTML = \'<div class="text-danger">Pembayaran kedaluwarsa / gagal.</div>\';\r\n                    }\r\n                })\r\n                .catch(() => {});\r\n        }, 4000);\r\n    }\r\n\r\n    function openPayment() {\r\n        const apiBase = getApiBase();\r\n        const pageId = window.pageId || null;\r\n        if (!pageId) {\r\n            alert(\'Page ID tidak ditemukan.\');\r\n            return;\r\n        }\r\n        qrWrap.innerHTML = \'Loading...\';\r\n        countdownEl.textContent = \'\';\r\n        fetch(apiBase + \'/api/payments/qris\', {\r\n            method: \'POST\',\r\n            headers: { \'Content-Type\': \'application/json\' },\r\n            body: JSON.stringify({ page_id: pageId })\r\n        })\r\n            .then(r => r.json())\r\n            .then(res => {\r\n                if (!res.order_id || !res.qr_url) {\r\n                    qrWrap.innerHTML = \'<div class="text-danger">Gagal membuat pembayaran.</div>\';\r\n                    return;\r\n                }\r\n                qrWrap.innerHTML = \'<img src=\\"\' + res.qr_url + \'\\" alt=\\"QR Pembayaran\\" class=\\"img-fluid\\">\';\r\n                startCountdown(res.expiry_time);\r\n                pollStatus(res.order_id);\r\n            })\r\n            .catch(() => {\r\n                qrWrap.innerHTML = \'<div class=\\"text-danger\\">Gagal memproses permintaan.</div>\';\r\n            });\r\n        const modal = new bootstrap.Modal(modalEl);\r\n        modal.show();\r\n    }\r\n\r\n    if (payBtn) {\r\n        payBtn.addEventListener(\'click\', function (e) {\r\n            e.preventDefault();\r\n            openPayment();\r\n        });\r\n    }\r\n})();\r\n</script>\r\n                    ', 'http://localhost/Shopee', 'http://localhost/Tokopedia', 'http://localhost/Facebook', 'http://localhost/Instagram', 'http://localhost/TikTok', 'http://localhost/Link', 'http://localhost/Corporate', 'http://localhost/Publisher', 'http://localhost/WhatsApp', 'http://localhost/Telegram', 'page/bemo-4.html', '2025-11-22 08:40:31', '2025-11-22 08:40:29', '2025-11-22 08:40:31', 2, 'gateway', '', '', '{"name":"Buku","price":"200000","note":"diskon 5%"}');

-- Membuang data untuk tabel landingpagebuilder.page_visits: ~12 rows (lebih kurang)
REPLACE INTO `page_visits` (`id`, `page_id`, `ip_address`, `user_agent`, `referrer`, `session_id`, `user_hash`, `created_at`) VALUES
	(1, 3, '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36', 'http://localhost/landingpagebuilder/public/page/demo-3.html', '9f9911cfaca275590e88dd3d946a7093', '945d5dcae9594a26f36389c6f72f9c31f678e0c5', '2025-11-22 06:09:51');

-- Membuang data untuk tabel landingpagebuilder.payments: ~0 rows (lebih kurang)

-- Membuang data untuk tabel landingpagebuilder.payment_proofs: ~0 rows (lebih kurang)

-- Membuang data untuk tabel landingpagebuilder.templates: ~2 rows (lebih kurang)
REPLACE INTO `templates` (`id`, `name`, `template_key`, `thumbnail`, `description`, `order_type`, `base_file`, `created_at`, `updated_at`) VALUES
	(1, 'Landing Pages', 'template_01', 'assets/templates/template_2.png', 'Direct Link Button whatsapp', 'link', 'assets/templates/template_01.html', '2025-11-21 14:46:30', '2025-11-21 14:46:56');

-- Membuang data untuk tabel landingpagebuilder.users: ~1 rows (lebih kurang)
REPLACE INTO `users` (`id`, `name`, `email`, `password`, `role`, `created_at`, `updated_at`) VALUES
	(1, 'Admin', 'admin@admin.com', '$2y$12$2slE9sJTMP4eyBOePQgQPuCP5GCzI4VWIT8EeBOzgLyCzlItSSKBa', 'admin', '2025-11-21 12:09:18', '2025-11-21 12:14:40');

/*!40103 SET TIME_ZONE=IFNULL(@OLD_TIME_ZONE, 'system') */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;
